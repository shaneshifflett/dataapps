{% if pages and show_pages %}
    <div class="pagination">
       {% if end_list %}
            <div class="goto">
                <form id="{{tab_div_id}}-form" action="" method="get">
                    <label for="gotoPage">Go to page:</label>
                    <input type="text" name="page" value="" id="gotoPage" class="text" />
                    <input type="image" src="{{STATIC_URL}}images/layout/button-submit-pagination.png" class="submit" />
                </form>
            </div>
    	{% endif %}
        <div class="pages">
            {% ifnotequal current_page_num 1 %}
                <div class="pageNumber prev">
                    <a href="#" class="pageLinkPrev">
                        <img src="{{STATIC_URL}}images/icons/pagination-prev.png" alt="" />
                    </a>
                </div>
            {% endifnotequal %}
            {% for i in start_list %}
                <div class="pageNumber{% ifequal i current_page_num %} active{% endifequal %}">
                    {% ifequal i current_page_num %}
                        {{i}}
                    {% else %}
                        <a href="#" class="pageLink">{{i}}</a>
                    {% endifequal %}
                </div>
            {% endfor %}
            {% if end_list %}
                <div class="pageNumber">...</div>
                {% for i in end_list %}
                    <div class="pageNumber{% ifequal i current_page_num %} active{% endifequal %}">
                        {% ifequal i current_page_num %}
                            {{i}}
                        {% else %}
                            <a href="#" class="pageLink">{{i}}</a>
                        {% endifequal %}
                    </div>
                {% endfor %}
            {% endif %}
            {% ifnotequal current_page_num pages.num_pages %}
                <div class="pageNumber next">
                    <a href="#" class="pageLinkNext">
                        <img src="{{STATIC_URL}}images/icons/pagination-next.png" alt="" />
                    </a>
                </div>
            {% endifnotequal %}
        </div>
    </div>
    <div id="pagination-error"></div>
{% endif %}

<script type="text/javascript">
    $(document).ready(function() {
        $('#{{tab_div_id}}-form').submit(function(e) {
            var page_form_num = $(this).serializeArray()[0].value
            $('#{{tab_div_id}}').parent().load('{{request.path}}?page=' + page_form_num, citizen.pagination.errorHandling);
            return false;
        });

        $('.pageLink').click(function() {
            var page_link_num = $(this).html();
            $('#{{tab_div_id}}').parent().load('{{request.path}}?page=' + page_link_num, citizen.pagination.errorHandling);
            return false;            
        });
        $('.pageLinkPrev').click(function() {
            $('#{{tab_div_id}}').parent().load('{{request.path}}?page={% if current_page.previous_page_number %}{{current_page.previous_page_number}}{% else %}{{current_page_num}}{% endif %}', citizen.pagination.errorHandling);
            return false;
        });
        $('.pageLinkNext').click(function() {
        	$('#{{tab_div_id}}').parent().load('{{request.path}}?page={% if current_page.has_next %}{{current_page.next_page_number}}{% else %}{{current_page_num}}{% endif %}', citizen.pagination.errorHandling);
            return false;
        });
    });
</script>